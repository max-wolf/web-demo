<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- import CSS -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>
<body>
<div id="app">
    <el-button type="text" @click="dialogVisible = true">点击打开 Dialog</el-button>

    <el-dialog
            title="提示"
            :visible.sync="dialogVisible"
            :close-on-click-modal="false"
            width="40%">
        <span>
            <el-input v-model="user_name" placeholder="用户名"></el-input>
        </span>

        <el-input v-model="user_password" placeholder="密码"></el-input>
        <span slot="footer" class="dialog-footer">
            <!--<el-button @click="dialogVisible = false">取 消</el-button>-->
            <el-button type="primary" @click="loginClick">确 定</el-button>
        </span>
    </el-dialog>


    <el-button @click="btn0Click">Button</el-button>

    <el-input v-model="input" placeholder="请输入内容"></el-input>

    <!--
        <div>{{message}}</div>
    -->
    <div v-html="message"></div>

    <el-button @click="btn1Click">Button</el-button>
    <template>
        <el-table
                :data="items"
                style="width: 100%">
            <el-table-column
                    prop="id"
                    label="id"
                    width="180">
            </el-table-column>
            <el-table-column
                    prop="message"
                    label="消息"
                    width="180">
            </el-table-column>
            <el-table-column label="操作">
                <template slot-scope="scope">
                    <el-button
                            size="mini"
                            @click="handleEdit(scope.$index, scope.row)">编辑
                    </el-button>
                    <el-button
                            size="mini"
                            type="danger"
                            @click="handleDelete(scope.$index, scope.row)">删除
                    </el-button>
                </template>
            </el-table-column>
        </el-table>
    </template>
</div>
</body>
<!-- import Vue before Element -->
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<!-- import JavaScript -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
    new Vue({
        el: '#app',
        data: function () {
            return {
                user_name: '',
                user_password: '',
                dialogVisible: false,
                btn0State: false,
                message: '',
                input: '',
                items: [],
                messageDetail: {
                    id: 0,
                    message: ''
                }
            }
        },
        methods: {
            btn0Click() {
                axios.get('/message/getMessageById', {
                    params: {
                        id: this.input
                    }
                })
                    .then(response => {
                        console.log(response);
                        console.log('-----------');
                        console.log(response.data);
                        if (response.data.result === 'success') {
                            this.message = response.data.messageDto.message;
                        } else {
                            this.dialogVisible = true;
                        }
                    })
                    .catch(function (error) {
                        console.log(error);
                    });
            },
            btn1Click() {
                axios.post('/message/getMessage', {
                    params: {}
                })
                    .then(response => {
                        console.log(response.data);
                        this.items = response.data;
                        console.log('-----------');
                    })
                    .catch(function (error) {
                        console.log(error);
                    });
            },
            loginClick() {
                console.log(this.user_name);
                console.log(this.user_password);
                axios.post('/user/login', {
                        name: this.user_name,
                        password: this.user_password
                },{
                    headers: {'Content-Type': 'application/json'}
                }).then(response => {
                        console.log(response);
                        console.log('-----------');
                        console.log(response.data.result);
                        if (response.data.result === 'success') {
                            this.dialogVisible = false;
                        } else {
                            this.dialogVisible = true;
                        }
                    })
                    .catch(function (error) {
                        console.log(error);
                    });
            }
        }
    })

</script>
<style>
    .el-input {
        margin: 10px;
    }
</style>
</html>